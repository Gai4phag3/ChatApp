const loginForm = document.getElementById('loginForm');
loginForm.addEventListener('submit', async (e) => {
  e.preventDefault();

  const username = document.getElementById('username').value.trim();
  const password = document.getElementById('password').value.trim();

  if (!username || !password) {
    alert('Please enter username and password');
    return;
  }

  try {
    const userDoc = await db.collection('users').doc(username).get();
    if (!userDoc.exists) {
      alert('No such user found');
      return;
    }

    const userData = userDoc.data();
    if (userData.password !== password) {
      alert('Incorrect password');
      return;
    }

    // Login success: store username and redirect
    localStorage.setItem('username', username);
    window.location.href = 'dashboard.html';

  } catch (error) {
    console.error('Login error:', error);
    alert('Login error, try again');
  }
});
